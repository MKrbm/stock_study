## RSAの仕組み
- 数学的なこと : https://qiita.com/YutaKase6/items/cd9e26d723809dc85928
- この人の良いよ : https://qiita.com/angel_p_57
## SSHの仕組み
- とりあえずこれ読む : https://rat.cis.k.hosei.ac.jp/article/rat/linuxliteracy/2005/ssh.html
- SSHが使用する暗号技術のリスト : https://www.alaxala.com/jp/techinfo/archive/manual/AX3660S/HTML/12_1_L/CFGUIDE/0210.HTM
- 特にRSAの使い方 : https://milestone-of-se.nesuke.com/sv-advanced/digicert/public-private-key/

# blockchainの仕組み
- 論文について
  - 簡単な日本語での[まとめ](https://www.ogis-ri.co.jp/otc/hiroba/technical/bitcoinpaper/)
  - 電子コインの問題点 (TTPの場合)
    - 偽造 
      - 本物に見えるコインを勝手に作ること。
      - 対策：デジタル署名を用いて、コインの発行場所を検証できるようにする
      - **論文を読んでも、厳密に偽造に対して強そうには見えない？**

    - 多重使用
      - 同じコインを繰り返し使うこと
      - 対策：コインのデータベースを管理する。一度使用されたら、もう使用できないようにするなど。
  - ブロックチェーンにおけるタイムスタンプについて
    - タイムスタンプとは、事実証明のためにその出来事が発生したタイミングを記録する仕組みのことを指します。例えば、現実世界では事実証明のために領収書などに記載されている日時もタイムスタンプの役割を果たしています。
    - コンピューター上のタイムスタンプを用いる場合
      - 定時間は各々のノードに設定されている時間。
      - 個人がコンピューターの設定時間を変えることで強固な事実証明が行われる可能性を大幅に下げる結果になってしまうという大きな弱点があり
    - 中央集権的タイムスタンプ
      - 中央のサーバーが１つの時間軸を設定することで、基準となる時刻を中央以外は改ざん不可能にし、上記のような個人による改ざんを防ごうという考え
      - 中央集権なので、ブロックチェーンの理念に反する
    - ブロックチェーンでは？
     - 分散化されたブロックチェーンでは、相対的な前後関係を証明さえできれば良いという考えです。
     - ハッシュの鎖を作り、確実な前後関係を築く。
  
  - POW
    - しかし、このハッシュの鎖はどの様に正しいと証明するのだろう？（途中で改ざんされている場合変なところがわかるが、そもそも一貫性のある嘘のハッシュの鎖を発行してしまっている可能性は？) 
    - ラウンドとマークルツリーを用いたタイムスタンプの場合は、定期的に新聞にラウンド・バリュー(ハッシュ)を発行することで、発行後は、最新のラウンドバリュー以前のデータを改ざんすることができなくなる。(おそらく発行する前は可能)。要するに、あとから改ざんできる余地がなくなるということ。
    - 上の方法は２つ問題を持つ？ 1. TTP(新聞)が必要 2. そもそも、発行元が受け付けないとかできる？
    - ブロックチェーンのPOWはネットワークに散らばる複数のノードがそれぞれ一斉にワークを開始する(ナンスを調べる)
    - 一つのノードでも目的のハッシュ（ナンスとも言える）を見つけたら、PoW一回分が終了
    - 理念：改ざんするとハッシュが変わるのでナンスを計算し直す必要がある。
    - 疑問
      - 全員で分ける理由. 全員で分けるだけで、改ざんできなくなるのでは？
      - 迷惑メールの箇所を読むこと。この例だと、

        > プライシング関数は迷惑メールを抑止しているだけで、それ以外には役に立つことをしていない (no useful purpose) と言うのです。

        と書かれている。
      
    - 結局コストがかかってしまう？電力コストなど 
    - それらさまざまな意見やブロックチェーン・プロジェクトを評価・検討するためには、**コストとともに、そのコストを支払って実現されること**はなんなのかもきちんと理解する必要があるでしょう。
    - 二重使用対策を行うため、各ノードがトランザクションのたったひとつの順番に合意できるような仕組みをとる。
    - PoW はコンセンサスアルゴリズム (consensus algorithm, 合意形成アルゴリズム) の一種である
    - しかし、今回見たとおり、PoW はブロックを生成する速さを一定に保つものであり、それだけで合意に至るものではありません
    - PoW は、コンセンサスアルゴリズムで用いられる技術要素、と言った方がより適切でしょう。ビットコインの合意形成の仕組みを「ナカモト・コンセンサス (Nakamoto Consensus)」と呼んで、PoW と明確に区別することもあります。
  
  - ethereum Wiki
    - https://github.com/ethereum/wiki/wiki/%5BJapanese%5D-White-Paper

  - bitcoin script
    - https://academy.binance.com/ja/articles/an-introduction-to-bitcoin-script
  - ### attacks
    - #### Transaction Malleability
      - https://qiita.com/nagmnt/items/81e7166e6ecdf2224665 は手を動かして理解できる
        -~~変更するのは、scriptsig なのでは？~~ 普通にscripsigを変更していました。
      - これを行うためには秘密鍵が必要？
        - 必要ない。scriptSigは、典型的には`<sig> <pubKey>`の形をとっているが、この`<sig>`は、scriptSigを除くトランザクションのハッシから生成される。生成にprivatekeyが必要。しかしながら、ScriptSigの変更は`<sig>`を変更する以外でも変更可能。例えば` OP_NOP <sig> <pubKey>`とするなど。
      - この変更を加えて再送信することで同じ内容の別のTXIDを持ったトランザクションがブロードキャストされ、それがブロックに入ってしまえば変更不可能
      - 仮に送信者が全てをTXIDで管理していたとすると、あたかも送ったトランザクションが何らかの理由で承認されなかったと勘違いされる。
      - **SegWit**によって解決可能

  - ### Bitcoin address

  - 二者間取引(ペイメントチャネル)
    - MultiSigを用いる
      - 複数の署名がないと使えないトランザクション？アカウント？
      -m 個の秘密鍵の内，n 個の秘密鍵を使用することで UTXO をアンロックするようなマルチシグネチャのことを m-of-n マルチシグと呼ぶ．今回は2-of-2まるちしぐを使用
    1. Funding Transactionを作る
    2. Refund Transactionを作る
    3. AからBにFunding Transactionを送り、署名してブロックチェーンに記録する.

  - ### Ethereum
    - Ethereum アカウント
      - nonce 、各トランザクションの処理が一度きりであることを確約するためのカウンター
      - アカウントの現在の ether balance
      - アカウントの contract code （もし存在すれば）
      - アカウントの storage （デフォルトは空）

      Ether はトランザクション手数料を支払うために使用されます。 一般的に、アカウントには二つの種類があります。 秘密鍵により管理される EOA (externally owned accounts) と自身のコントラクトコードにより管理される contract (contract account) です。 EOA はコードを持たず、EOA からトランザクションを生成し署名することによって メッセージ を送ることができます。contract では、メッセージを受信した時はいつも保持コードをアクティベートし、内部ストレージを読み書き可能にし、メッセージを送信するもしくは新しいコントラクトを作る、といった内容のことが順番に実行されます。
      ここで言うコントラクトとは、特定のコードを実行し、自身の ether 残高と、なんども使う変数を把握するのに必要な key/value ストレージ を直接管理する権限を持っている、ということに注意してください。

    - メッセージ と トランザクション


      
  - ### Smart Contract
    - 

  - ## 発表
    - 
  

      


      
- 電子署名として、ECDSA を利用　[詳しい説明](https://qiita.com/angel_p_57/items/355eec5b5547ac122607#%E3%82%B3%E3%83%B3%E3%82%B9%E3%83%88%E3%83%A9%E3%82%AF%E3%82%BF-initialize)
- 